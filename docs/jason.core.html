<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>jason.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Jason</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="getting-started.html"><div class="inner"><span>Getting Started</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jason</span></div></div></li><li class="depth-2 branch"><a href="jason.convenience.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>convenience</span></div></a></li><li class="depth-2 current"><a href="jason.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jason.core.html#var-*default-object-mapper*"><div class="inner"><span>*default-object-mapper*</span></div></a></li><li class="depth-1"><a href="jason.core.html#var-*meta-prefix*"><div class="inner"><span>*meta-prefix*</span></div></a></li><li class="depth-1"><a href="jason.core.html#var--.3Edecode-key-fn"><div class="inner"><span>-&gt;decode-key-fn</span></div></a></li><li class="depth-1"><a href="jason.core.html#var--.3Eencode-key-fn"><div class="inner"><span>-&gt;encode-key-fn</span></div></a></li><li class="depth-1"><a href="jason.core.html#var-defcoders"><div class="inner"><span>defcoders</span></div></a></li><li class="depth-1"><a href="jason.core.html#var-new-json-coders"><div class="inner"><span>new-json-coders</span></div></a></li><li class="depth-1"><a href="jason.core.html#var-new-json-decoder"><div class="inner"><span>new-json-decoder</span></div></a></li><li class="depth-1"><a href="jason.core.html#var-new-json-encoder"><div class="inner"><span>new-json-encoder</span></div></a></li><li class="depth-1"><a href="jason.core.html#var-new-object-mapper"><div class="inner"><span>new-object-mapper</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jason.core</h1><div class="doc"><div class="markdown"><p>JSON encoding and decoding function construction with support for configurable key conversion.</p>
</div></div><div class="public anchor" id="var-*default-object-mapper*"><h3>*default-object-mapper*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Default ObjectMapper instance used when none provided. Has the same configuration as when <a href="jason.core.html#var-new-object-mapper">new-object-mapper</a> is called with no argument.</p>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L123">view source</a></div></div><div class="public anchor" id="var-*meta-prefix*"><h3>*meta-prefix*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Meta key prefix used to detect and preserve meta fields. Defaults to ‘_’.</p>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L14">view source</a></div></div><div class="public anchor" id="var--.3Edecode-key-fn"><h3>-&gt;decode-key-fn</h3><div class="usage"><code>(-&gt;decode-key-fn)</code><code>(-&gt;decode-key-fn fn-or-opts)</code></div><div class="doc"><div class="markdown"><p>Constructs a function to decode JSON keys.</p>
<p>With no arguments, decodes to kebab-case keywords and is <code>_meta</code> aware, i.e., any fields with leading meta prefix will retain their meta prefix.</p>
<p>With a function argument, uses that function to convert both standard and meta keys while retaining leading meta prefix.</p>
<p>Also accepts a map option argument in place of the function which can contain:</p>
<ul>
<li><code>:standard-key-fn</code>:  the key function to use for standard fields, also used for meta fields if no <code>:meta-key-fn</code> provided.</li>
<li><code>:meta-key-fn</code>:      the key function to use for meta fields, overriding all meta handling.</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L64">view source</a></div></div><div class="public anchor" id="var--.3Eencode-key-fn"><h3>-&gt;encode-key-fn</h3><div class="usage"><code>(-&gt;encode-key-fn)</code><code>(-&gt;encode-key-fn fn-or-opts)</code></div><div class="doc"><div class="markdown"><p>Constructs a function to encode JSON keys.</p>
<p>With no arguments, encodes to camelCase strings and is _meta aware, i.e., any fields with leading meta prefix will retain their meta prefix.</p>
<p>With a function argument, uses that function to convert both standard and meta keys while retaining leading meta prefix.</p>
<p>Also accepts a map option argument in place of the function which can contain:</p>
<ul>
<li><code>:standard-key-fn</code>:  the key function to use for standard fields, also used for meta fields if no :meta-key-fn provided.</li>
<li><code>:meta-key-fn</code>:      the key function to use for meta fields, overriding all meta handling.</li>
</ul>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L43">view source</a></div></div><div class="public anchor" id="var-defcoders"><h3>defcoders</h3><h4 class="type">macro</h4><div class="usage"><code>(defcoders &amp; args)</code></div><div class="doc"><div class="markdown"><p>Defines a pair of JSON encode / decode functions in the current namespace.</p>
<p>If a symbol is passed as the first argument, it is used as the “type” of the coders such that the defined functions have the names <code>-&gt;&lt;type&gt;-json</code> and <code>&lt;-&lt;type&gt;-json</code>.</p>
<p>If no symbol is passed, the defined coder functions have the names <code>-&gt;json</code> and <code>&lt;-json</code>.</p>
<p>In addition to a type symbol, a sequence of key-value arguments can be provided, supporting the same options as exposed on <a href="jason.core.html#var-new-json-coders">new-json-coders</a> allowing full control over the generated functions.</p>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L167">view source</a></div></div><div class="public anchor" id="var-new-json-coders"><h3>new-json-coders</h3><div class="usage"><code>(new-json-coders)</code><code>(new-json-coders options)</code></div><div class="doc"><div class="markdown"><p>Constructs a pair of JSON encode / decode functions, at keys <code>:-&gt;json</code> and <code>:&lt;-json</code> in the returned map.</p>
<p>With no arguments, uses the default <code>ObjectMapper</code> as returned by <a href="jason.core.html#var-new-object-mapper">new-object-mapper</a>. The optional argument is the same map of options as described in the documentation for <a href="jason.core.html#var-new-object-mapper">new-object-mapper</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L154">view source</a></div></div><div class="public anchor" id="var-new-json-decoder"><h3>new-json-decoder</h3><div class="usage"><code>(new-json-decoder)</code><code>(new-json-decoder object-mapper)</code></div><div class="doc"><div class="markdown"><p>Constructs a JSON decoder function. With no argument, uses the default object mapper defined in <a href="jason.core.html#var-*default-object-mapper*">*default-object-mapper*</a>. Optionally, takes an <code>ObjectMapper</code> to use instead.</p>
<p>The returned decoder returns nil on a nil or empty string value, otherwise JSON decodes it.</p>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L140">view source</a></div></div><div class="public anchor" id="var-new-json-encoder"><h3>new-json-encoder</h3><div class="usage"><code>(new-json-encoder)</code><code>(new-json-encoder object-mapper)</code></div><div class="doc"><div class="markdown"><p>Constructs a JSON encoder function. With no argument, uses the default object mapper defined in <a href="jason.core.html#var-*default-object-mapper*">*default-object-mapper*</a>. Optionally, takes an <code>ObjectMapper</code> to use instead.</p>
<p>The returned encoder returns nil on a nil value, otherwise JSON encodes it.</p>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L128">view source</a></div></div><div class="public anchor" id="var-new-object-mapper"><h3>new-object-mapper</h3><div class="usage"><code>(new-object-mapper)</code><code>(new-object-mapper options)</code></div><div class="doc"><div class="markdown"><p>Constructs a Jackson <code>ObjectMapper</code>.</p>
<p>With no arguments, the returned object mapper encodes and decodes keys exactly as provided, does not produce pretty JSON and includes no additional modules.</p>
<p>The optional first parameter is a map of options. The following options are supported:</p>
<table>
<thead>
<tr><th> Mapper options      </th><th>                                  </th></tr>
</thead>
<tbody>
<tr><td> <code>:modules</code>          </td><td> vector of <code>ObjectMapper</code> modules </td></tr>
</tbody>
</table>
<p> </p>
<table>
<thead>
<tr><th> Encoding options    </th><th>                                                     </th></tr>
</thead>
<tbody>
<tr><td> <code>:pretty</code>           </td><td> set to <code>true</code> use Jackson’s pretty-printing defaults (default: <code>true</code>) </td></tr>
<tr><td> <code>:escape-non-ascii</code> </td><td> set to <code>true</code> to escape non-ASCII characters </td></tr>
<tr><td> <code>:date-format</code>      </td><td> string for custom date formatting (default: <code>yyyy-MM-dd'T'HH:mm:ss'Z'</code>) </td></tr>
<tr><td> <code>:encode-key-fn</code>    </td><td> <code>true</code> to coerce keyword keys to strings, <code>false</code> to leave them as keywords, or a function to provide custom coercion (default: the default of <a href="jason.core.html#var--.3Eencode-key-fn">-&gt;encode-key-fn</a>) </td></tr>
<tr><td> <code>:encoders</code>         </td><td> a map of custom encoders where keys should be types and values should be encoder functions </td></tr>
</tbody>
</table>
<p>Encoder functions take two parameters: the value to be encoded and a <code>JsonGenerator</code> object. The function should call <code>JsonGenerator</code> methods to emit the desired JSON.</p>
<table>
<thead>
<tr><th> Decoding options    </th><th>                                                     </th></tr>
</thead>
<tbody>
<tr><td> <code>:decode-key-fn</code>    </td><td>  <code>true</code> to coerce keys to keywords, false to leave them as strings, or a function to provide custom coercion (default: the default of <a href="jason.core.html#var--.3Edecode-key-fn">-&gt;decode-key-fn</a>) </td></tr>
<tr><td> <code>:bigdecimals</code>      </td><td>  <code>true</code> to decode doubles as BigDecimals (default: <code>false</code>) </td></tr>
</tbody>
</table>
<p>See <a href="https://metosin.github.io/jsonista">https://metosin.github.io/jsonista</a> for further details of the underlying JSON library, <code>jsonista</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/logicblocks/jason/blob/1.0.0/src/jason/core.clj#L85">view source</a></div></div></div></body></html>